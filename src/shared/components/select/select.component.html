<div class="relative">
  <!-- Componente customizado para seleção múltipla -->
  <ng-container *ngIf="multiple; else singleSelect">
    <div 
      (click)="toggleDropdown()" 
      (keyup.enter)="toggleDropdown()" 
      (keyup.space)="toggleDropdown()" 
      tabindex="0"
      class="w-full h-[64px] p-3 text-base border-2 border-cinzaPadraoInput rounded-md outline-none focus:border-purple-600 active:border-purple-600 peer placeholder:text-cinzaPadraoInput  active:placeholder:text-purple-600">
      
      <span *ngIf="selectedLabels.length === 0 && data.length > 0" class="text-cinzaPadraoInput ">{{ data[0].label }}</span>
      <span *ngIf="selectedLabels.length > 0">{{ selectedLabels.join(', ') }}</span>
    </div>

    <div *ngIf="isDropdownOpen" class="absolute w-full bg-white border border-gray-300 rounded-md mt-1 shadow-md z-10 max-h-64 overflow-y-auto">
      <label *ngFor="let option of data" class="flex items-center p-2 hover:bg-gray-100 cursor-pointer">
        <span class="flex-1 text-gray-700">{{ option.label }}</span>
        <input 
          type="checkbox"
          [checked]="isSelected(option.value)"
          (change)="onCheckboxChange(option.value)"
          class="form-checkbox  transition duration-200 ease-in-out border border-gray-400 rounded h-4 w-4 checked:border-transparent" />
      </label>
    </div>
  </ng-container>

  <!-- Componente padrão para seleção única -->
  <ng-template #singleSelect>
    <select
      (change)="onSelectChange($event)"
      (focus)="onFocus()"
      (blur)="onBlur()"
      class="w-full h-[64px] p-3 text-base text-gray-500 border-2 border-cinzaPadraoInput rounded-md outline-none focus:border-purple-600 active:border-purple-600 peer placeholder:text-cinzaPadraoInput focus:placeholder:text-purple-600 active:placeholder:text-purple-600"
      [ngClass]="{
        'border-red-500 focus:border-red-500 active:border-red-500 placeholder:text-red-500 focus:placeholder:text-red-500 active:placeholder:text-red-500':
          showError
      }"
    >
      <option
        class="text-gray-500"
        *ngFor="let option of data"
        [value]="option.value">
        {{ option.label }}
      </option>
    </select>
  </ng-template>

  <!-- Label -->
  <label
    for="{{ label }}"
    class="absolute left-4 -top-2 text-sm text-cinzaPadraoInput bg-white px-1 transition-all duration-300 ease-in-out pointer-events-none peer-placeholder-shown:top-5 peer-placeholder-shown:left-4 peer-placeholder-shown:text-base peer-placeholder-shown:text-cinzaPadraoInput peer-focus:-top-2 peer-focus:text-xs peer-focus:text-purple-600 peer-active:text-purple-600"
    [ngClass]="{
      'text-red-500 peer-focus:text-red-500 peer-active:text-red-500 peer-placeholder-shown:text-red-500':
        showError
    }">
    {{ label }}
  </label>
</div>
